"use strict";function e(e){return e&&e.__esModule?e:{default:e}}require("@million/lint/devtools");var t=e(require("pretty-ms")),n=/[-–—!$%^&*()_+|~=`{}[\]:/\\"'“”‘’;<>?,.@#\s\n\t\r]$/,o=(e,t="")=>{const o={};let i="",r="";const l=[],s=[],a=(e,t,n)=>{i.endsWith("%c")?s[s.length-1]+=t:(i+="%c",s.push(t)),o[e]=n,r=void 0},c=e=>void 0===e||n.test(e),u=(e,t,n,i,l)=>{o[e]&&c(i)?a(e,n,!1):!o[e]&&c(l)?a(e,t,!0):r=e};for(let t=0,n=e.length;t<n;t++){let n;i="";const o=e[t];for(let e=0;e<o.length;e++)r=o[e],"*"===r?"*"===o[e+1]?(e++,u("**","font-weight: bold;","font-weight: normal;",o[e+1],n)):u("*","font-style: italic;","font-style: normal;",o[e+1],n):"_"===r?"_"===o[e+1]?(e++,u("__","font-weight: bold;","font-weight: normal;",o[e+1],n)):u("_","font-style: italic;","font-style: normal;",o[e+1],n):"`"===r&&u("`","background: hsla(0,0%,70%,.3); border-radius:3px; padding: 0 2px;","background: unset;",o[e+1],n),n=r,void 0!==r&&(i+=r);l.length||l.push(""),""!==i&&(l.length?l[l.length-1]+=i:l.push(i))}return t&&(l.length||l.push(""),l[l.length-1]+=`%c(@ ${t})`,s.push("color: #999; font-style: italic; font-size: 0.9em; padding-left: 2em;")),l.push(...s),l},i=e=>{switch(typeof e){case"function":return e.toString();case"string":return e;case"object":if(null===e)return"null";if(Array.isArray(e))return e.length>0?"[…]":"[]";if("symbol"==typeof e.$$typeof&&"Symbol(react.element)"===String(e.$$typeof))return`<${e.type.displayName||e.type.name||""}${Object.keys(e.props).length>0?" …":""}>`;if("object"==typeof e&&null!==e&&e.constructor===Object){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return"{…}";return"{}"}const t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t){const t=Object.getPrototypeOf(e),n=t&&t.constructor;if("function"==typeof n)return`${n.displayName||n.name||""}{…}`}return`${t}{…}`;default:return String(e)}},r=e=>e&&["function","object"].includes(typeof e),l=(e,t)=>{for(;e;){if(t(e))return e;if(e.child){const n=l(e.child,t);if(n)return n}e=e.sibling??null}return null},s=e=>l(e,(e=>e.stateNode)),a=window,c=Object.create(null),u=e=>{const t=(e=>e?.type?.displayName||e?.type?.name||e?.elementType?.displayName||e?.elementType?.name||"<unknown>")(e);let n=c[t];if(!n){n={potentialUnstableProps:{},unstableProps:{},totalTime:0,selfTime:0,baseTime:0,count:0,source:e._debugSource?(o=e._debugSource.fileName,l=e._debugSource.lineNumber,`vscode://file${o}:${l||0}`):void 0,nodes:[s(e)?.stateNode]},c[t]=n}var o,l;if((e=>{if(!e||!e.alternate)return!0;switch(e.tag){case 0:case 1:case 9:case 14:case 15:return!(1&~((void 0!==e.flags?e.flags:e.effectTag)??0));default:return e.alternate.memoizedProps!==e.memoizedProps||e.alternate.memoizedState!==e.memoizedState||e.alternate.ref!==e.ref}})(e)){const t=e?.actualDuration||0,o=e?.treeBaseDuration||0;let l=t,a=e?.child;for(;t>0&&a;)l-=a.actualDuration||0,a=a.sibling;n.totalTime+=t,n.selfTime+=l,n.baseTime=o,n.count++;const c=s(e)?.stateNode;c&&n.nodes.push(c);const u=e.memoizedProps,d=e.alternate?.memoizedProps;if(u&&"object"==typeof u)for(const e in u){const s=u[e],a=d?.[e],c=r(s),f=r(a),p=n=>{const i=n[e];i?(i.count++,i.totalTime+=t,i.selfTime+=l,i.baseTime+=o):n[e]={count:1,totalTime:t,selfTime:l,baseTime:o}};s!==a&&(c&&p(n.potentialUnstableProps),c&&f&&i(s)===i(a)&&p(n.unstableProps))}}return!1},d=a.__REACT_DEVTOOLS_GLOBAL_HOOK__?.onCommitFiberRoot;a.__REACT_DEVTOOLS_GLOBAL_HOOK__&&(a.__REACT_DEVTOOLS_GLOBAL_HOOK__.onCommitFiberRoot=(e,t)=>{d&&d(e,t);const n=t.current;l(n,u)});var f,p=()=>{let e=0,t=0,n=[];for(const o in c){const i=c[o];if("<unknown>"===o||!i.count)continue;let r=0;const l=i.selfTime/i.count,s=i.potentialUnstableProps;for(const e in s){const t=s[e];r=Math.max(r,t.count)}const a=l*r;e+=a,t+=i.selfTime,n.push({componentName:o,potentialSavings:a,count:r,selfTime:i.selfTime,nodes:i.nodes,source:i.source})}n=n.sort(((e,t)=>e.selfTime-t.selfTime));return{table:n,improvement:e/t,savings:e}},m=()=>{document.querySelectorAll(".__million_audit_box__").forEach((e=>e.remove()))},g=()=>{const{table:e}=p();m();const t=(e=>{const t=[{r:255,g:255,b:255},{r:255,g:255,b:0},{r:255,g:165,b:0},{r:255,g:0,b:0}];return n=>{const o=n/(e-1)*(t.length-1),i=Math.floor(o),r=Math.min(i+1,t.length-1),l=o-i;return{r:Math.round(t[i].r+l*(t[r].r-t[i].r)),g:Math.round(t[i].g+l*(t[r].g-t[i].g)),b:Math.round(t[i].b+l*(t[r].b-t[i].b))}}})(e.length),n=new WeakSet;for(let o=0,i=e.length;o<i;o++){const i=e[o];for(let e=0,r=i.nodes.length;e<r;e++){let r=i.nodes[e];if(r instanceof Text&&r.parentNode instanceof Element&&(r=r.parentNode),r instanceof Element){const{r:e,g:i,b:l}=t(o),s=document.createElement("div"),a=r.getBoundingClientRect();if(a.top<0||a.bottom>window.innerHeight)continue;if(n.has(r))continue;if(n.add(r),a.width-100>window.innerWidth||a.height-100>window.innerHeight)continue;if(0===a.width||0===a.height)continue;s.className="__million_audit_box__",s.style.left=`${a.left}px`,s.style.top=`${a.top}px`,s.style.width=`${a.width}px`,s.style.height=`${a.height}px`,s.style.backgroundColor=`rgba(${e}, ${i}, ${l}, 0.1)`,document.body.appendChild(s)}}}},h=()=>{console.log("%c[Million Lint] Audit generated","background: red; color: white; font-size: 20px; padding: 10px;");const{table:e,improvement:n,savings:i}=p();for(let n=0,i=e.length;n<i;n++){const i=e[n];console.log(...o([`**${t.default(i.selfTime)}** _(×${i.count})_ · \`${i.componentName}\``],i.source))}console.log(`%cYou can potentially save: ${t.default(i)} (${Math.round(100*n)}% faster)`,"background: red; color: white; font-size: 20px; padding: 10px;")},b=!1;window.$audit=()=>{if(b||(document.head.appendChild(document.createElement("style")).textContent="\n      .__million_audit_box__ {\n        position: fixed;\n        padding: 4px 8px;\n        border-radius: 4px;\n        z-index: 9998;\n        opacity: 0.8;\n        pointer-events: none;\n      }\n    "),b=!0,f)return clearInterval(f),f=null,void m();g(),h(),f=setInterval((()=>{}),1e3),g()},Object.defineProperty(exports,"prettyMs",{enumerable:!0,get:function(){return t.default}}),exports.compileMarkdown=o,exports.logAudit=h;